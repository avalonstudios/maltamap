function isSorted(e){for(var t=0;t<e.length-1;t++)if(e[t]!=t)return!1;return!0}var timerFunction,imagePuzzle={stepCount:0,startTime:(new Date).getTime(),startGame:function(e,t){this.setImage(e,t),$("#playPanel").show(),$("#sortable").randomize(),this.enableSwapping("#sortable li"),this.stepCount=0,this.startTime=(new Date).getTime(),this.tick()},tick:function(){var e=(new Date).getTime(),t=parseInt((e-imagePuzzle.startTime)/1e3,10);$("#timerPanel").text(t),timerFunction=setTimeout(imagePuzzle.tick,1e3)},enableSwapping:function(e){$(e).draggable({snap:"#droppable",snapMode:"outer",revert:"invalid",helper:"clone"}),$(e).droppable({drop:function(e,t){var a=$(t.draggable).clone().replaceAll(this);if($(this).replaceAll(t.draggable),currentList=$("#sortable > li").map(function(e,t){return $(t).attr("data-value")}),isSorted(currentList))$("#actualImageBox").empty().html($("#gameOver").html());else{var i=(new Date).getTime();imagePuzzle.stepCount++,$(".stepCount").text(imagePuzzle.stepCount),$(".timeCount").text(parseInt((i-imagePuzzle.startTime)/1e3,10))}imagePuzzle.enableSwapping(this),imagePuzzle.enableSwapping(a)}})},setImage:function(e,t){var a=100/((t=t||3)-1),i=e[Math.floor(Math.random()*e.length)],n=$(window).innerWidth(),r=i.width,l=i.height;n<r&&(l=parseFloat(.95*n/r*i.height),r=.95*n),$("#imgTitle").html(i.title),$("#actualImage").attr("src",i.src).css({width:i.width/2,height:i.height/2}),$("#sortable").empty(),$("#sortable").css("width",r);for(var o=0;o<t*t;o++){var s=a*(o%t)+"%",h=a*Math.floor(o/t)+"%",u=$('<li class="item" data-value="'+o+'"></li>').css({"background-image":"url("+i.src+")","background-size":100*t+"%","background-position":s+" "+h,width:r/t,height:l/t});$("#sortable").append(u)}$("#sortable").randomize()}};$.fn.randomize=function(e){return(e?$(this).find(e):$(this).children()).parent().each(function(){$(this).children(e).sort(function(){return Math.round(Math.random())-.5}).remove().appendTo(this)}),this};
//# sourceMappingURL=puzzles.min.js.map